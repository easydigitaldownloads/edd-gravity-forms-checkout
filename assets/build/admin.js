!function(e){var o={};function i(t){if(o[t])return o[t].exports;var d=o[t]={i:t,l:!1,exports:{}};return e[t].call(d.exports,d,d.exports,i),d.l=!0,d.exports}i.m=e,i.c=o,i.d=function(e,o,t){i.o(e,o)||Object.defineProperty(e,o,{enumerable:!0,get:t})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,o){if(1&o&&(e=i(e)),8&o)return e;if(4&o&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(i.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&o&&"string"!=typeof e)for(var d in e)i.d(t,d,function(o){return e[o]}.bind(null,d));return t},i.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(o,"a",o),o},i.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},i.p="",i(i.s=0)}([function(e,o){jQuery(document).ready((function(e){var o=o||{debug:1*EDDGF.debug==1,init:function(){var i=o;e(document).on("gform_load_field_settings",i.on_load_field_settings),e("body").on("change","#field_edd_download",i.change_download).on("show change","#product_field,#product_field_type",i.maybe_show_variations).on("mouseup keyup",".edd-gf-get-variations button",i.get_variations)},log:function(e,i){o.debug&&(i=i||null,console.log(e,i))},on_load_field_settings:function(){o.hide_connect_for_options()},hide_connect_for_options:function(){var e=GetSelectedField();"product"!==e.type&&"option"!==e.type&&o.product_hide_all(e)},update_field_choices:function(e){UpdateFieldChoices(e.type),LoadFieldChoices(e)},get_product_field:function(e){return void 0===e.type||"product"!==e.type&&"option"!==e.type?(o.log("not a product field",e),!1):void 0===e.productField||""===e.productField?e:GetFieldById(e.productField)},get_variations:function(i){var t=o;if("keyup"!==i.type||32===i.keyCode||13===i.keyCode){var d=GetSelectedField(),n=t.get_product_field(d),r=n?n.eddDownload:"";e(".edd-gf-loading").show(),t.log("in edd-gf-get-variations",{field:d,edd_gf_selected_download:r,eddProductField:n}),e.post(ajaxurl,{action:"edd_gf_check_for_variations",download_id:r,nonce:e("#edd_gf_download_nonce").val(),format:"json"}).done((function(o){t.log("Check For Variations Data",o),e(".edd-gf-loading").hide();var i=jQuery.parseJSON(o);t.log("parsed JSON price Variable Items",i),0===i.length?(t.log("There were no variations. Reverting to original field choices."),t.restore_field_choices(d)):(d.eddChoicesBackup=d.choices,d.choices=[],e("#field_choice_values_enabled").prop("checked",!0),SetFieldProperty("enableChoiceValue",!0),ToggleChoiceValue(),SetFieldChoices(),e.each(i,(function(e,o){t.log("Item being added as Choice",o);var i=GetCurrentCurrency().toMoney(o.amount),n=new Choice;n.text=o.name,n.value=e.toString(),n.price=i,n.isSelected=1===o.default,d.choices.push(n)})),t.update_field_choices(d))})).error((function(o){e(".edd-gf-loading").hide(),t.log("Error loading variations",o)}))}else t.log("keyCode not space or return.",i.keyCode)},maybe_show_variations:function(i){var t=o,d=GetSelectedField(),n=t.get_product_field(d),r=n?n.eddDownload:"";e("#gfield_settings_choices_container").find(".gfield_choice_header_value").text(EDDGF.text_value),t.log("#"+e(i.target).attr("id")+" "+i.type,{event:i,field:d,edd_gf_selected_download:r,eddProductField:n}),""===r||"0"===r?t.product_hide_all(d):n.eddHasVariables?t.product_has_variables(d):t.product_has_no_variables(d)},product_hide_all:function(i){e(".product-has-variations-message").hide(),e(".edd_gf_connect_variations").slideUp(100),o.restore_field_choices(i)},product_has_variables:function(i){if(o.log("product_has_variables"),e(".edd-gf-get-variations").show(),e(".product-has-variations-message").show(),e(".edd-gf-no-variations-warning").hide(),e(".product-add-option-field").hide(),i.productField=i.productField||"",""===i.productField&&"radio"!==i.inputType&&"select"!==i.inputType)return e(".edd_gf_connect_variations").hide(),void e(".product-add-option-field").show();e("#gfield_settings_choices_container .gfield_choice_header_value").text(EDDGF.text_price_id),e(".edd_gf_connect_variations:hidden").slideDown("fast")},product_has_no_variables:function(i){o.log("product_has_no_variables"),e(".edd-gf-no-variations-warning").hide(),e(".product-has-variations-message").hide(),e(".edd-gf-get-variations").hide(),""!==i.productField||"radio"===i.inputType||"select"===i.inputType?(e(".edd-gf-no-variations-warning").show(),e(".edd_gf_connect_variations:hidden").slideDown("fast")):e(".edd_gf_connect_variations").hide(),o.restore_field_choices(i)},restore_field_choices:function(e){var i=o.get_product_field(e);!1!==i?(o.log("In edd_gf_restore_field_choices"),i.eddChoicesBackup?i.choices=i.eddChoicesBackup:void 0===i.choices&&(i.choices=[new Choice("First Option","","0.00"),new Choice("Second Option","","0.00"),new Choice("Third Option","","0.00")]),o.update_field_choices(i),o.log("field",i)):o.log("restore_field_choices: not a product field")},change_download:function(i){var t=o,d=e("option:selected",e(this)).val();SetFieldProperty("eddDownload",d),SetFieldProperty("eddHasVariables",!1),e.isNumeric(d)&&0!==parseInt(d,10)&&e("option:selected",e(this)).attr("data-variations")&&SetFieldProperty("eddHasVariables",!0),t.maybe_show_variations(i)}};o.init()}))}]);